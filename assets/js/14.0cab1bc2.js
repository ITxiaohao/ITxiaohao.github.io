(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{423:function(t,s,a){"use strict";a.r(s);var n=a(2),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h2",{attrs:{id:"前言"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前言","aria-hidden":"true"}},[t._v("#")]),t._v(" 前言")]),t._v(" "),a("p",[t._v("最近在学习 Git 提交规范、发布及生成 CHANGELOG，最后实现自己的 CHANGELOG 模版并发布到 NPM，插件地址请戳"),a("a",{attrs:{href:"https://www.npmjs.com/package/conventional-changelog-custom-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("这里"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("之前对 Git Commit 不是很规范，想到什么提交什么，团队中每个人的提交方式都不同，没有很特别的指定哪些 commit 是新功能，哪些是修复 bug，查看 commit 记录比较吃力")]),t._v(" "),a("p",[t._v("对版本的概念也不熟，使用 git tag 打版本之前，都需要"),a("strong",[t._v("先查")]),t._v("一遍远程上的版本是多少，新增完本地 tag 之后再将 tag push 到远程仓库，这也只是完成了打版本的步骤，如果需要提供 CHANGELOG.md 文件来说明每次版本的更新内容就比较麻烦")]),t._v(" "),a("p",[t._v("这时候就需要插件来帮我们规范 git commit 提交、自动化发布版本，自动生成 CHANGELOG")]),t._v(" "),a("p",[a("strong",[t._v("本文篇幅较长，图片较多，提前预警！")])]),t._v(" "),a("h2",{attrs:{id:"husky-钩子插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#husky-钩子插件","aria-hidden":"true"}},[t._v("#")]),t._v(" husky 钩子插件")]),t._v(" "),a("p",[t._v("使用 "),a("a",{attrs:{href:"https://github.com/typicode/husky",target:"_blank",rel:"noopener noreferrer"}},[t._v("husky"),a("OutboundLink")],1),t._v(" 来管理 "),a("code",[t._v("git commit")]),t._v(" 之前的操作，为什么要这么做，因为我们可以在 "),a("code",[t._v("git commit")]),t._v(" 之前再校验一次代码，防止提交「脏」代码，保证代码库中的代码是「干净」的，"),a("code",[t._v("husky")]),t._v(" 不仅仅能管理 "),a("code",[t._v("commit")]),t._v("，"),a("code",[t._v("git")]),t._v(" 的钩子几乎都能管理，不过用的最多的还是 "),a("code",[t._v("commit")]),t._v(" 和 "),a("code",[t._v("push")])]),t._v(" "),a("ul",[a("li",[t._v("安装")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" husky --save-dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("在 package 中配置")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run lint"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("这里在 "),a("code",[t._v("commit")]),t._v(" 之前，我们先执行了 "),a("code",[t._v("npm run lint")]),t._v("，这是 "),a("code",[t._v("vue-cli3")]),t._v(" 给我们提供的命令，会根据我们的 "),a("code",[t._v("eslint")]),t._v(" 规则来校验代码，并且"),a("strong",[t._v("自动修复")]),t._v("，记得先 "),a("code",[t._v("git add")]),t._v(" 文件")]),t._v(" "),a("ul",[a("li",[t._v("使用")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Vue/20190130184001.png",alt:""}})]),t._v(" "),a("p",[t._v("但这样会有一个问题，就是这次提交，我可能只修改了一个文件，比如我就修改了 "),a("code",[t._v("a.js")]),t._v(" 的内容，但它依然会校验 src 下面所有的 .js 文件，非常的不友好。")]),t._v(" "),a("p",[t._v("导致的问题就是：每次提交代码，无论改动多少，都会检查整个项目下的文件，当项目大了之后，检查"),a("strong",[t._v("速度")]),t._v("也会变得越来越"),a("strong",[t._v("慢")])]),t._v(" "),a("h2",{attrs:{id:"lint-staged"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#lint-staged","aria-hidden":"true"}},[t._v("#")]),t._v(" lint-staged")]),t._v(" "),a("p",[t._v("解决上面的痛点就需要使用 "),a("a",{attrs:{href:"https://github.com/okonet/lint-staged",target:"_blank",rel:"noopener noreferrer"}},[t._v("lint-staged"),a("OutboundLink")],1),t._v("。它"),a("strong",[t._v("只会")]),t._v("校验你提交或者说你修改的"),a("strong",[t._v("部分")]),t._v("内容。")]),t._v(" "),a("p",[a("code",[t._v("npm install lint-staged -D -S")])]),t._v(" "),a("p",[t._v("修改 package.json 配置：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"husky"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"hooks"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"pre-commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"lint-staged"')]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"lint-staged"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"src/*_/_.{js,vue}"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"npm run lint"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git add"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br")])]),a("p",[t._v("如上配置，每次它只会在你本地 "),a("code",[t._v("commit")]),t._v(" 之前，校验你提交的内容是否符合你"),a("strong",[t._v("本地配置")]),t._v("的 "),a("strong",[t._v("eslint")]),t._v(" 规则，如果符合规则，则会提交成功。如果不符合它会"),a("strong",[t._v("自动")]),t._v("执行 "),a("code",[t._v("npm run lint")]),t._v(" 尝试帮你"),a("strong",[t._v("自动修复")]),t._v("，如果修复成功则会帮你把修复好的代码提交，如果失败，则会提示你错误，让你修好这个错误之后才能允许你提交代码。")]),t._v(" "),a("p",[t._v("但这并不是强制的，有些团队成员或者说刚来的新人没有在编辑器中配置或者"),a("strong",[t._v("无视")]),t._v("命令行中提示的错误，强行提交，这时候就需要配置 "),a("strong",[t._v("pre-commit")]),t._v(" 这种强制性校验的东西，保证所有提交到远程仓库的内容都是符合团队规范的。")]),t._v(" "),a("p",[t._v("参考"),a("strong",[t._v("花裤衩")]),t._v("大佬的文档 "),a("a",{attrs:{href:"https://panjiachen.gitee.io/vue-element-admin-site/zh/guide/advanced/git-hook.html#husky",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-element-admin"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"commit-提交规范检查"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#commit-提交规范检查","aria-hidden":"true"}},[t._v("#")]),t._v(" Commit 提交规范检查")]),t._v(" "),a("p",[t._v("在多人协作项目中，如果代码风格统一、代码提交信息的说明准确，在后期维护以及 "),a("code",[t._v("Bug")]),t._v(" 处理时会更加方便。")]),t._v(" "),a("p",[t._v("Git 每次提交代码，都要写 "),a("code",[t._v("Commit message")]),t._v("（提交说明）")]),t._v(" "),a("p",[t._v("但是每个人的提交方式不同，没有很特别的指定哪些 commit 是新功能，哪些是修复 bug，这时需要插件来帮我们规范化")]),t._v(" "),a("p",[t._v("规范 Commit message 的作用")]),t._v(" "),a("ul",[a("li",[t._v("提供更多的历史信息，"),a("strong",[t._v("方便")]),t._v("快速浏览")]),t._v(" "),a("li",[t._v("过滤某些 commit（比如文档改动），便于快速查找信息")]),t._v(" "),a("li",[t._v("直接从 commit 生成 "),a("strong",[t._v("CHANGELOG")])]),t._v(" "),a("li",[a("strong",[t._v("可读性好")]),t._v("，清晰，不必深入看代码即可了解当前 commit 的作用。")]),t._v(" "),a("li",[t._v("为 Code Reviewing（代码审查）做准备")]),t._v(" "),a("li",[t._v("方便跟踪工程历史")])]),t._v(" "),a("p",[t._v("在项目中安装插件：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i commitizen cz-conventional-changelog --save-dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("在 package 中配置")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"config"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commitizen"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"path"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"cz-conventional-changelog"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("ul",[a("li",[t._v("在 package 的 "),a("strong",[t._v("scripts")]),t._v(" 中配置命令")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"commit"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git-cz"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("使用")])]),t._v(" "),a("p",[t._v("依赖安装完就可以开始"),a("strong",[t._v("秀操作")]),t._v("了")]),t._v(" "),a("p",[t._v("要先 "),a("code",[t._v("git add .")]),t._v(" 将文件加入本地暂存区后，才能 "),a("code",[t._v("commit")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run commit\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("注意，如果之前通过 "),a("code",[t._v("git commit")]),t._v(" 这种方式提交代码，都要改为 "),a("code",[t._v("git-cz")])]),t._v(" "),a("p",[t._v("注意，如果之前通过 "),a("code",[t._v("git commit")]),t._v(" 这种方式提交代码，都要改为 "),a("code",[t._v("git-cz")])]),t._v(" "),a("p",[t._v("注意，如果之前通过 "),a("code",[t._v("git commit")]),t._v(" 这种方式提交代码，都要改为 "),a("code",[t._v("git-cz")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Vue/20190130194119.png",alt:""}})]),t._v(" "),a("p",[t._v("Commit message 格式说明")]),t._v(" "),a("p",[t._v("Commit message 一般包括三部分："),a("strong",[t._v("Header")]),t._v("、"),a("strong",[t._v("Body")]),t._v(" 和 "),a("strong",[t._v("Footer")])]),t._v(" "),a("p",[a("strong",[t._v("Header")]),t._v(" "),a("code",[t._v("type(scope):subject")]),t._v(" type(必需)、scope(可选) 和 subject(必需)")]),t._v(" "),a("p",[t._v("这里有几种类型可以选择")]),t._v(" "),a("p",[t._v("type：用于说明 commit 的类别，规定为如下几种")]),t._v(" "),a("div",{staticClass:"language-md line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v("feat：新功能\nfix：修补 bug\ndocs：修改文档，比如 README, CHANGELOG, CONTRIBUTE 等等\nstyle： 不改变代码逻辑 (仅仅修改了空格、格式缩进、逗号等等)\nrefactor：重构（既不修复错误也不添加功能）\nperf: 优化相关，比如提升性能、体验\ntest：增加测试，包括单元测试、集成测试等\nbuild: 构建系统或外部依赖项的更改\nci：自动化流程配置或脚本修改\nchore: 非 src 和 test 的修改\nrevert: 恢复先前的提交\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[t._v("scope：(可选)用于说明 commit 影响的范围")]),t._v(" "),a("p",[t._v("subject：commit 的简要说明，尽量简短")]),t._v(" "),a("p",[a("strong",[t._v("Body")])]),t._v(" "),a("p",[t._v("Body 部分是对本次 commit 的详细描述，可以分成多行")]),t._v(" "),a("p",[a("strong",[t._v("Footer")])]),t._v(" "),a("p",[t._v("Footer 部分只用于两种情况。")]),t._v(" "),a("ul",[a("li",[t._v("不兼容变动")])]),t._v(" "),a("p",[t._v("如果当前代码与上一个版本不兼容，则 Footer 部分以 "),a("strong",[t._v("BREAKING CHANGE")]),t._v(" 开头，后面是对变动的描述、以及变动理由和迁移方法。")]),t._v(" "),a("ul",[a("li",[t._v("关闭 Issue")])]),t._v(" "),a("p",[t._v("如果当前 commit 针对某个 issue，那么可以在 Footer 部分关闭这个 issue, 也可以一次关闭多个 issue")]),t._v(" "),a("div",{staticClass:"language-md line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v("? Select the "),a("span",{pre:!0,attrs:{class:"token bold"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")]),t._v("type"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")])]),t._v(" of change that you're committing:\n(type) 选择提交更改的类型\n? What is the "),a("span",{pre:!0,attrs:{class:"token bold"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")]),t._v("scope"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")])]),t._v(" of this change (e.g. component or file name)? (press enter to skip)\n(scope) 此次更改的范围是什么（组件或者文件名）\n? Write a "),a("span",{pre:!0,attrs:{class:"token bold"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")]),t._v("short"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")])]),t._v(", imperative tense description of the change:\n(subject) 写一个简短的，命令式的变化描述\n? Provide a "),a("span",{pre:!0,attrs:{class:"token bold"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")]),t._v("longer description"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")])]),t._v(" of the change: (press enter to skip)\n(Body) 提供更改的长描述\n? Are there any "),a("span",{pre:!0,attrs:{class:"token bold"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")]),t._v("breaking changes"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")])]),t._v("?\n(Footer) 有没有突破性的变化\n? Does this change affect any open "),a("span",{pre:!0,attrs:{class:"token bold"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")]),t._v("issues"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("**")])]),t._v("? (y/N)\n(Footer) 此次更改是否有要关闭 issues\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br")])]),a("p",[t._v("如果当前 commit 针对某个 issues")]),t._v(" "),a("p",[a("code",[t._v("? Does this change affect any open issues? (y/N)")])]),t._v(" "),a("p",[t._v("选择 Y，输入 "),a("strong",[t._v("Closes #1")]),t._v(" (表示关闭第 1 个 issues)")]),t._v(" "),a("p",[t._v("也可以一次关闭多个 issues ： Closes #1 #2 #3")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190625162916.png",alt:""}})]),t._v(" "),a("p",[t._v("CHANGELOG 中 issues 默认的链接地址是根据 package.json 中的 "),a("strong",[t._v("repository")]),t._v(" 来生成的")]),t._v(" "),a("p",[t._v("如果 "),a("code",[t._v("repository")]),t._v(" 没有，则会获取 git 中的"),a("strong",[t._v("远程仓库路径")]),t._v("来作为前缀")]),t._v(" "),a("p",[t._v("之后就会进行"),a("strong",[t._v("代码格式化校验")]),t._v("，如果代码不符合规范，同样会提交失败，"),a("strong",[t._v("一定要确保项目当前格式没问题，规范后再提交！！！")])]),t._v(" "),a("p",[t._v("更多细节可以参考阮一峰老师的博客："),a("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Commit message 和 Change log 编写指南"),a("OutboundLink")],1)]),t._v(" "),a("h2",{attrs:{id:"自动发布版本"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动发布版本","aria-hidden":"true"}},[t._v("#")]),t._v(" 自动发布版本")]),t._v(" "),a("p",[t._v("这里我使用 "),a("a",{attrs:{href:"https://github.com/release-it/release-it#readme",target:"_blank",rel:"noopener noreferrer"}},[t._v("release-it"),a("OutboundLink")],1),t._v(" 作为发布版本插件，也可以选择 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/standard-version",target:"_blank",rel:"noopener noreferrer"}},[t._v("standard-version"),a("OutboundLink")],1)]),t._v(" "),a("ul",[a("li",[t._v("安装插件")])]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" --save-dev release-it\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("ul",[a("li",[t._v("在 package 的 "),a("strong",[t._v("scripts")]),t._v(" 中配置命令")])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"release"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"release-it"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("在项目终端输入 "),a("code",[t._v("npm run release")]),t._v(" 就会执行操作")]),t._v(" "),a("p",[t._v("如果出现下图的报错信息，可以通过登录 npm 解决")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190710225230.png",alt:""}})]),t._v(" "),a("p",[t._v("在发布版本前，"),a("strong",[t._v("一定")]),t._v("要"),a("strong",[t._v("确认")]),t._v("是否还有文件"),a("strong",[t._v("没有提交")]),t._v("，否则是会报错的，报错信息如下：")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("ERROR Working "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dir")]),t._v(" must be clean.\nPlease stage and commit your changes.\nAlternatively, use "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),t._v("--no-git.requireCleanWorkingDir"),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" to include the changes "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the release commit "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("or save "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git.requireCleanWorkingDir"')]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),a("span",{pre:!0,attrs:{class:"token variable"}},[t._v("`")])]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" the configuration"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(".\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("p",[t._v("工作目录必须是干净的，请暂存 ("),a("strong",[t._v("add")]),t._v(") 并提交 ("),a("strong",[t._v("commit")]),t._v(") 你的更改")]),t._v(" "),a("p",[a("strong",[t._v("不推荐")]),t._v("通过修改 git 配置来解决，因为发布一个版本就应该是"),a("strong",[t._v("没有任何更改")]),t._v("的，"),a("strong",[t._v("稳定的")]),t._v("才去发布，git tag 如果没有指定对应的 commitID，"),a("strong",[t._v("默认")]),t._v("在"),a("strong",[t._v("最新")]),t._v("的 commit 上打标签，"),a("strong",[t._v("注意！！"),a("strong",[t._v("要在")]),t._v("主分支")]),t._v("(master)上发版本")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190625154549.png",alt:""}})]),t._v(" "),a("p",[a("code",[t._v("release-it")]),t._v("会读取"),a("strong",[t._v("本地")]),t._v("的 "),a("strong",[t._v("package.json")]),t._v(" 中的 "),a("strong",[t._v("version")]),t._v("，提示你"),a("strong",[t._v("当前")]),t._v("版本是多少，不需要开发者使用 "),a("code",[t._v("git tag -l")]),t._v(" 来查询当前本地版本是多少，以及这个版本做了哪些改动，它提供了几个默认选项让你选择版本号")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190625154523.png",alt:""}})]),t._v(" "),a("p",[t._v("如果你觉得上面的选项不能满足你的要求，最后一个选项是自己填入版本信息(要符合规范)，有关版本规范可以参考"),a("a",{attrs:{href:"https://semver.org/lang/zh-CN/",target:"_blank",rel:"noopener noreferrer"}},[t._v("语义化版本 2.0.0"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190625154925.png",alt:""}})]),t._v(" "),a("p",[t._v("确认版本后，会自动修改 "),a("code",[t._v("package.json")]),t._v(" 的版本信息，这是前端开发者查看当前项目版本的途径之一。之后就是询问是否要 commit，是否打 tag，是否 push 到远程仓库，可以一路回车。最后一项如果是公司项目，不需要上传到 npm 仓库，选 NO 即可，即使选了 Yes，但只要你在 "),a("strong",[t._v("package.json")]),t._v(" 中配置 "),a("strong",[t._v("private")]),t._v(" 为 "),a("strong",[t._v("true")]),t._v("，也不会上传。如何查看发布成功? 可以输入 "),a("code",[t._v("git tag -l")]),t._v(" 查看本地 tag，也可以 "),a("code",[t._v("git ls-remote --tags origin")]),t._v(" 查看远程 tag")]),t._v(" "),a("p",[t._v("但是这只是一个 tag，没有详细信息，"),a("strong",[t._v("更新日志")]),t._v("还是需要开发者手动编写")]),t._v(" "),a("p",[t._v("这个时候就需要用到自动生成 CHANGELOG 插件了")]),t._v(" "),a("h2",{attrs:{id:"自动生成-changelog"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自动生成-changelog","aria-hidden":"true"}},[t._v("#")]),t._v(" 自动生成 CHANGELOG")]),t._v(" "),a("p",[t._v("安装")]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" i conventional-changelog-cli --save-dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("配置 package.json")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"changelog"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conventional-changelog -p angular -i CHANGELOG.md -s -r 0"')]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("上面 changelog 命令不会覆盖以前的 "),a("code",[t._v("CHANGELOG")]),t._v("，只会在 "),a("strong",[t._v("CHANGELOG.md")]),t._v(" 的"),a("strong",[t._v("头部")]),t._v("加上自从上次发布以来的变动。")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" run changelog\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Vue/20190130210836.png",alt:""}})]),t._v(" "),a("p",[t._v("生成 CHANGELOG.md 文件")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/Vue/20190130195243.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190710231129.png",alt:""}})]),t._v(" "),a("p",[t._v("在 "),a("strong",[t._v("CHANGELOG.md")]),t._v(" 的头部加上自从上次"),a("strong",[t._v("发布版本")]),t._v("以来的变动。显示 feat、bug、doc 等类型")]),t._v(" "),a("p",[t._v("生成的 CHANGELOG 不会按 commit 上传的时间顺序排序，有人给官方提交了 issues，等待官方解决。。👉"),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/issues/373",target:"_blank",rel:"noopener noreferrer"}},[t._v("传送门"),a("OutboundLink")],1)]),t._v(" "),a("p",[t._v("可以打开 GitHub/GitLub 仓库，将更新日志生成的内容对应的填入 tag 版本中就可以了")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712043249.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"深入-conventional-changelog-源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#深入-conventional-changelog-源码","aria-hidden":"true"}},[t._v("#")]),t._v(" 深入 conventional-changelog 源码")]),t._v(" "),a("p",[t._v("这里先展示最终生成的 CHANGELOG 效果图")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190710133722.png",alt:""}})]),t._v(" "),a("p",[t._v("起源背景如下：")]),t._v(" "),a("blockquote",[a("p",[t._v("测试：”需要在 CHANGELOG 中生成 commit 对应的提交人，这样问题定位就知道去找谁负责”")]),t._v(" "),a("p",[t._v("我：“😎 这个简单~配置下参数就可以了”")])]),t._v(" "),a("p",[t._v("我以为只要配置一下参数，毕竟 CHANGELOG 插件是支持自定义参数的，当我看到文档"),a("strong",[t._v("懵逼")]),t._v("了，没有提供这两个参数，显示提交人和提交人邮箱，咋办，翻 issue。。。这个需求应该有人提 😏，根据 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/issues/351",target:"_blank",rel:"noopener noreferrer"}},[t._v("#351"),a("OutboundLink")],1),t._v(" 知道了使用自定义配置需要从外部传入自定义配置文件")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629145125.png",alt:""}})]),t._v(" "),a("p",[t._v("新建一个配置文件，在命令后面带上 -n <文件路径>")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"changelog"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conventional-changelog -p angular -i CHANGELOG.md -s -r 0 -n ./changelog-option/index.js"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[t._v("解决了使用自定义配置问题，如何增加 CHANGELOG 生成更多的提交信息，还是翻 issue... "),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/issues/349",target:"_blank",rel:"noopener noreferrer"}},[t._v("#349"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629145434.png",alt:""}})]),t._v(" "),a("p",[t._v("结合起来大概是这样，试试效果：")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629145555.png",alt:""}})]),t._v(" "),a("p",[t._v("format 里面有 authorName 和 authorEmail 字段，运行 "),a("code",[t._v("npm run changelog")]),t._v(" 后依旧没有效果 😖 只能翻源码了")]),t._v(" "),a("h2",{attrs:{id:"vscode-调试-node-modules-第三方插件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#vscode-调试-node-modules-第三方插件","aria-hidden":"true"}},[t._v("#")]),t._v(" VSCode 调试 node_modules 第三方插件")]),t._v(" "),a("p",[t._v("配置 "),a("strong",[t._v("launch.json")]),t._v("，调试 "),a("strong",[t._v("conventional-changelog-cli")]),t._v(" 插件下的 "),a("strong",[t._v("cli.js")]),t._v(" 文件，这里保持和 package 中的 changelog 一致，传入参数 "),a("code",[t._v('"-p", "angular", "-i", "CHANGELOG.md", "-s", "-r", "0", "-n", "./changelog-option/index.js"')])]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"version"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0.2.0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"configurations"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"request"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"launch"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"name"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Launch Program"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"cwd"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${workspaceFolder}"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"program"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"${workspaceFolder}\\\\node_modules\\\\conventional-changelog-cli\\\\cli.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"args"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-p"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"angular"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-i"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"CHANGELOG.md"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-s"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-r"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"0"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"-n"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"./changelog-option/index.js"')]),t._v("\n      "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br")])]),a("p",[t._v("全局搜索传入的配置项字段："),a("strong",[t._v("gitRawCommitsOpts")]),t._v("，打个断点调试一下")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712012615.png",alt:""}})]),t._v(" "),a("p",[t._v("发现作者是将用户传入的 "),a("strong",[t._v("gitRawCommitsOpts")]),t._v(" 做个合并，最后传入到 "),a("strong",[t._v("conventionalChangelog")]),t._v(" 方法中去执行，继续查看该方法")]),t._v(" "),a("p",[t._v("插件由 "),a("code",[t._v("conventional-changelog-cli")]),t._v(" 跳转到 "),a("code",[t._v("conventional-changelog")]),t._v(" 下")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712094254.png",alt:""}})]),t._v(" "),a("p",[t._v("判断用户是否有传入 "),a("strong",[t._v("preset")]),t._v(" 预设参数，调试的时候使用了 "),a("strong",[t._v("angular")]),t._v(" 的配置 ("),a("strong",[t._v("-p angular")]),t._v(")")]),t._v(" "),a("p",[t._v("这里 return 了一个 "),a("code",[t._v("conventionalChangelogCore")]),t._v(" 方法，依旧点击跳转")]),t._v(" "),a("h2",{attrs:{id:"conventional-changelog-core"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conventional-changelog-core","aria-hidden":"true"}},[t._v("#")]),t._v(" conventional-changelog-core")]),t._v(" "),a("p",[t._v("作为插件的核心库，最核心的地方就是 "),a("strong",[t._v("mergeConfig")]),t._v(" 这个方法")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712023828.png",alt:""}})]),t._v(" "),a("p",[t._v("在 core 中将配置传入 "),a("strong",[t._v("mergeConfig")]),t._v(" 中进行合并")]),t._v(" "),a("p",[a("strong",[t._v("format")]),t._v(" 默认只有 "),a("strong",[t._v("hash")]),t._v("、"),a("strong",[t._v("gitTags")]),t._v(" 和 "),a("strong",[t._v("committerDate")]),t._v("，没有需要的 "),a("strong",[t._v("authorName")]),t._v(" 和 "),a("strong",[t._v("authorEmail")]),t._v("，fromTag 是我们最后一次提交的 tag，"),a("strong",[t._v("merges: false")]),t._v(" 表示在 CHANGELOG 中"),a("strong",[t._v("不会")]),t._v("生成 merges 分支的信息")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712014400.png",alt:""}})]),t._v(" "),a("p",[a("strong",[t._v("mergeConfig")]),t._v(" 是一个 "),a("strong",[t._v("Promise")]),t._v("，求值后将配置传给了 "),a("strong",[t._v("gitRawCommits")]),t._v("，涉及了 "),a("strong",[t._v("pipe")]),t._v(" 导流来传递数据")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712025551.png",alt:""}})]),t._v(" "),a("p",[t._v("将 "),a("code",[t._v("gitRawCommitsOpts")]),t._v(" 配置传入 "),a("code",[t._v("gitRawCommits")]),t._v(" 方法中，继续点进去看，又会跳转到 "),a("code",[t._v("git-raw-commits")]),t._v(" 插件")]),t._v(" "),a("h2",{attrs:{id:"git-raw-commits"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#git-raw-commits","aria-hidden":"true"}},[t._v("#")]),t._v(" git-raw-commits")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629153050.png",alt:""}})]),t._v(" "),a("p",[t._v("通过 "),a("code",[t._v("git-raw-commits")]),t._v(" 的 GitHub 官网 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/blob/master/packages/git-raw-commits/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("README"),a("OutboundLink")],1),t._v("，发现这个插件是从本地 git 仓库中获取提交记录，之前传入的 "),a("strong",[t._v("format")]),t._v(" 就是 git-log 中的参数")]),t._v(" "),a("div",{staticClass:"language-md line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-md"}},[a("code",[t._v("hash：哈希值\n\ngitTags：标签\n\ncommitterDate：提交时间\n\nauthorName：提交人\n\nauthorEmail：邮箱\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br")])]),a("p",[t._v("更多 git-log 细节可以去看 "),a("strong",[t._v("git")]),t._v(" "),a("a",{attrs:{href:"https://git-scm.com/docs/git-log",target:"_blank",rel:"noopener noreferrer"}},[t._v("官方文档"),a("OutboundLink")],1),t._v("，也可以在 git log 后面带上我们配置的 format 进行格式化")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190710232529.png",alt:""}})]),t._v(" "),a("p",[t._v("直接使用 git log 查看 git 提交记录中，也有 Author 的 name 和 email 字段")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190710232445.png",alt:""}})]),t._v(" "),a("p",[t._v("看到这里，确定了 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/git-raw-commits",target:"_blank",rel:"noopener noreferrer"}},[t._v("git-raw-commits"),a("OutboundLink")],1),t._v(" 插件只是从 git 中读取数据并格式化，那么肯定有个插件是将这些数据写成 CHANGELOG.md 文件，于是继续翻 "),a("code",[t._v("conventional-changelog-core")]),t._v(" ，发现 "),a("code",[t._v("conventional-changelog-writer")]),t._v("，这个插件先不看，还记得之前使用的是 "),a("code",[t._v("angular")]),t._v(" 的预设吗，可以去看 "),a("code",[t._v("conventional-changelog-angular")]),t._v(" 插件")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629155258.png",alt:""}})]),t._v(" "),a("p",[t._v("好的项目从文件名就知道各个文件是做什么的，将不同插件的配置单独拆分，这点值得学习")]),t._v(" "),a("h2",{attrs:{id:"conventional-changelog-angular"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#conventional-changelog-angular","aria-hidden":"true"}},[t._v("#")]),t._v(" conventional-changelog-angular")]),t._v(" "),a("p",[a("code",[t._v("writer-opts.js")]),t._v(" 就是写入 CHANGELOG 的配置，最后会将配置传给 "),a("code",[t._v("conventional-changelog-writer")]),t._v("，这里来匹配我们之前 commit message 的信息")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629155450.png",alt:""}})]),t._v(" "),a("p",[t._v("其实在 writer 之前，还有一个 "),a("a",{attrs:{href:"https://github.com/conventional-changelog-archived-repos/conventional-commits-parser",target:"_blank",rel:"noopener noreferrer"}},[a("strong",[t._v("parser")]),a("OutboundLink")],1),t._v(" 插件，用来解析我们提交的信息，这个 changelog 里面到底是依赖了多少插件。。。")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190703095448.png",alt:""}})]),t._v(" "),a("p",[t._v("在用 commit "),a("strong",[t._v("规范化")]),t._v("插件提交的时候，就需要填写相应的信息，这里打印一下 commit 信息")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190703095255.png",alt:""}})]),t._v(" "),a("p",[t._v("发现的确有 "),a("strong",[t._v("authorName")]),t._v(" 和 "),a("strong",[t._v("authorEmail")]),t._v(" 这两个字段存在，而且 "),a("code",[t._v("conventional-changelog-writer")]),t._v("这个插件就是将这样的对象生成 CHANGELOG.md，通过插件的 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-writer",target:"_blank",rel:"noopener noreferrer"}},[t._v("README"),a("OutboundLink")],1),t._v(" 可以知道")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190710232625.png",alt:""}})]),t._v(" "),a("p",[t._v("现在字段也有了，但是为什么不会显示呢，继续看源码，这里用到了 "),a("code",[t._v("templates/commit.hbs")]),t._v(" 文件")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629160014.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629155938.png",alt:""}})]),t._v(" "),a("p",[t._v("看到这里也就差不多了，template 文件夹下就是生成 CHANGELOG 的模版文件，查了下 hbs("),a("strong",[t._v("Handlebars")]),t._v(") 是一个模版引擎。不过在 commit.hbs 中却并"),a("strong",[t._v("没有")]),t._v("发现有用到这两个字段，想想也是，这两个字段是我配置 "),a("code",[t._v("gitRawCommitsOpts")]),t._v(" 传入的")]),t._v(" "),a("p",[t._v("说明 "),a("code",[t._v("angular")]),t._v(" 预设一开始就没想过要生成 authorName 和 email。。。这就尴尬了，只能自己加上了，照葫芦画瓢，修改 commit.hbs 文件，在生成 commit 的 hash 值后面加上")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629160929.png",alt:""}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629161112.png",alt:""}})]),t._v(" "),a("p",[t._v("成功啦~~！！！🎉🎉🎉")]),t._v(" "),a("p",[t._v("让我激动一下，但是转念一想 🤔，这种直接修改 "),a("strong",[t._v("node_modules")]),t._v(" 里插件的源码，根本没法分享啊，如果同事要用，不可能也这样去修改 "),a("code",[t._v("conventional-changelog-angular")]),t._v(" 的源码吧，而且只要重新 npm install 安装依赖后，之前修改了也会消失")]),t._v(" "),a("p",[t._v("作者已经在 "),a("code",[t._v("conventional-changelog-cli")]),t._v(" 中提供了自定义的"),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog-angular/blob/master/index.js",target:"_blank",rel:"noopener noreferrer"}},[t._v("例子"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629162025.png",alt:""}})]),t._v(" "),a("p",[t._v("不过这个地址已经被"),a("strong",[t._v("废弃")]),t._v("了，新地址就是我们之前使用的 angular 预设 "),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/blob/master/packages/conventional-changelog-angular/README.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("conventional-changelog-angular"),a("OutboundLink")],1),t._v(" ，官方也有提供其他预设模版，如："),a("code",[t._v("atom")]),t._v("、"),a("code",[t._v("eslint")]),t._v("、"),a("code",[t._v("jQuery")])]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190710232827.png",alt:""}})]),t._v(" "),a("p",[t._v("这种在"),a("strong",[t._v("一个")]),t._v(" package 中管理"),a("strong",[t._v("多个")]),t._v("项目是用了 "),a("a",{attrs:{href:"https://lerna.js.org/",target:"_blank",rel:"noopener noreferrer"}},[t._v("lerna"),a("OutboundLink")],1),t._v("，一个用于管理拥有多个包的 JavaScript 项目的工具。是一种比较流行的 "),a("code",[t._v("monorepo")]),t._v(" 项目管理模式，React、Vue、Babel 都有用这种模式来管理。")]),t._v(" "),a("p",[t._v("前面也分析了 "),a("strong",[t._v("conventional-changelog-angular")]),t._v(" ，直接 clone 源码来改，创建 "),a("code",[t._v("git-raw-commit.js")])]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[t._v("module"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  format"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'%B%n-hash-%n%H%n-gitTags-%n%d%n-committerDate-%n%ci%n-authorName-%n%an%n-authorEmail-%n%ae'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br")])]),a("p",[t._v("在 index.js 中传入并使用")]),t._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'use strict'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Q")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`q`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" conventionalChangelog "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`./conventional-changelog`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" parserOpts "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`./parser-opts`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" recommendedBumpOpts "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`./conventional-recommended-bump`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" writerOpts "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token template-string"}},[a("span",{pre:!0,attrs:{class:"token string"}},[t._v("`./writer-opts`")])]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 格式化 git log 信息")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" gitRawCommitsOpts "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'./git-raw-commit'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("Q")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("all")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n  conventionalChangelog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  parserOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  recommendedBumpOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  writerOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  gitRawCommitsOpts\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("spread")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("conventionalChangelog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    parserOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    recommendedBumpOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    writerOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    gitRawCommitsOpts")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n      conventionalChangelog"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      parserOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      recommendedBumpOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      writerOpts"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n      gitRawCommitsOpts "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 传入")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br")])]),a("p",[t._v("之后修改 commit.hbs，显示 authorName 和 authorEmail")]),t._v(" "),a("blockquote",[a("p",[t._v("这里有个"),a("strong",[t._v("小坑")]),t._v("！！我用 "),a("strong",[t._v("VSCode")]),t._v(" 修改完直接保存后，如果有"),a("strong",[t._v("多次提交")]),t._v("，不会折行，会挤在同一行，估计是保存的"),a("strong",[t._v("格式不对")]),t._v("，也许是我 VSCode 安装了比较多的格式化扩展，建议用 "),a("strong",[t._v("Notepad++")]),t._v(" 去修改 "),a("strong",[t._v("commit.hbs")]),t._v(" 文件")])]),t._v(" "),a("h2",{attrs:{id:"替换-issues-路径"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#替换-issues-路径","aria-hidden":"true"}},[t._v("#")]),t._v(" 替换 issues 路径")]),t._v(" "),a("p",[t._v("公司使用 "),a("strong",[t._v("redmine")]),t._v(" 来管理项目，测试人员会在 "),a("strong",[t._v("redmine")]),t._v(" 中提 "),a("strong",[t._v("issues")]),t._v("，这里生成完 "),a("strong",[t._v("CHANGELOG")]),t._v(" 要批量替换 "),a("strong",[t._v("issues")]),t._v(" 的地址，将 "),a("strong",[t._v("GitLab")]),t._v(" 地址前缀替换成 "),a("strong",[t._v("redmine")]),t._v("，网上说用 "),a("strong",[t._v("replace")]),t._v(" 库，可我发现这个库上传 npm 是三年前，并且已经"),a("strong",[t._v("不维护了")]),t._v("，使用后也"),a("strong",[t._v("报错")]),t._v("。。。于是写了一个简单的字符串替换文件，生成完 CHANGELOG 后运行该文件即可替换，支持传递参数（参考 "),a("code",[t._v("conventional-changelog")]),t._v(" 源码，使用了 "),a("a",{attrs:{href:"https://www.npmjs.com/package/minimist",target:"_blank",rel:"noopener noreferrer"}},[t._v("minimist"),a("OutboundLink")],1),t._v(" 插件来获取传递的参数）")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"changeissueurl"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node ./changelog-option/replace.js https://gitlba.com/issues/ https://redmine.example.com/issues"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br")])]),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712111034.png",alt:""}})]),t._v(" "),a("p",[t._v("再把这两个脚本集成到一个 version 中，之后要发版本，生成 CHANGELOG 只要运行 "),a("strong",[t._v("npm run version")]),t._v(" 即可")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190629163807.png",alt:""}})]),t._v(" "),a("h2",{attrs:{id:"发布到-npm-仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#发布到-npm-仓库","aria-hidden":"true"}},[t._v("#")]),t._v(" 发布到 NPM 仓库")]),t._v(" "),a("p",[t._v("这样还是太"),a("strong",[t._v("麻烦")]),t._v("，对于使用者来说不需要了解太多，而且文件存在本地，不方便"),a("strong",[t._v("迁移")]),t._v("，🤔 能不能像 angular 一样直接做成预设模版，让 "),a("code",[t._v("conventional-changelog")]),t._v(" 直接去用我们自定义的预设模版就行了，为了验证，还是得翻源码，之前有调试到，但是没细看")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712033631.png",alt:""}})]),t._v(" "),a("p",[t._v("在 "),a("code",[t._v("conventional-changelog-preset-loader")]),t._v(" 中")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712033801.png",alt:""}})]),t._v(" "),a("p",[t._v("预设只要按照 "),a("code",[t._v("${scope}conventional-changelog-${name}")]),t._v(" 这种命名规范就可以被 require，"),a("strong",[t._v("scope")]),t._v(" 是因为 npm 仓库不能同名，可以加上自己的用户名作为作用域，例如："),a("code",[t._v("@zsh/conventional-changelog-angular")]),t._v("，之后在配置中改为 "),a("code",[t._v("-p @zsh/angular")]),t._v(" 就可以使用自定义的预设了")]),t._v(" "),a("p",[t._v("感谢 "),a("code",[t._v("conventional-changelog")]),t._v(" ！不多说，起一个 npm 项目，将之前的文件都放进去，再次对模版进行优化。")]),t._v(" "),a("p",[t._v("TODO：")]),t._v(" "),a("ul",[a("li",[t._v("[x] authorName 和 authorEmail 不一定是必需的，可配置")]),t._v(" "),a("li",[t._v("[x] issues 替换地址更为简便")]),t._v(" "),a("li",[t._v("[x] 给 Title 新增 "),a("strong",[t._v("emojis")]),t._v(" 🚀")])]),t._v(" "),a("p",[t._v("因为这里获取的 commit 是字符串格式，可以在 commit.hbs 模版中设置一个值，之后再根据用户的配置来进行替换，这样 authorName 和 authorEmail 就不是必需的，默认禁用，需要手动设置开启")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190712034749.png",alt:""}})]),t._v(" "),a("p",[t._v("issues 和 emojis 比较简单就不说了，相信大家如果认真的看到这里，完全可以做你自己的预设~")]),t._v(" "),a("p",[t._v("由于是第一次发布到 npm 上，没什么经验，效果不好还望见谅 🏃‍♂️，npm 地址："),a("a",{attrs:{href:"https://www.npmjs.com/package/conventional-changelog-custom-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("conventional-changelog-custom-config"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("使用")])]),t._v(" "),a("div",{staticClass:"language-sh line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-sh"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("npm")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" conventional-changelog-custom-config --save-dev\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br")])]),a("p",[t._v("通过在 package.json 中配置参数的形式来定制 CHANGELOG，"),a("strong",[t._v("不填配置")]),t._v("则会按照 "),a("strong",[t._v("angular")]),t._v(" 的预设模版生成 CHANGELOG，具体配置如下：")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"changelog"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"conventional-changelog -p custom-config -i CHANGELOG.md -s -r 0"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"changelog"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"bugsUrl"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://redmine.example.com/issues/"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"emojis"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorName"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"authorEmail"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br")])]),a("p",[a("strong",[t._v("bugsUrl")])]),t._v(" "),a("p",[t._v("Type: "),a("code",[t._v("string")]),t._v(" Default: "),a("code",[t._v("false")])]),t._v(" "),a("p",[t._v("当你需要将 issues URL 替换成其他 URL 时，使用该参数，例如使用 "),a("strong",[t._v("redmine")]),t._v(" 管理项目, "),a("code",[t._v("bugsUrl: 'https://redmine.example.com/issues/'")])]),t._v(" "),a("p",[t._v("如果不填 "),a("code",[t._v("bugsUrl")]),t._v(" 则会根据 "),a("strong",[t._v("package.json")]),t._v(" 中的 "),a("code",[t._v("repository")]),t._v(" 或 "),a("code",[t._v("repository.url")]),t._v(" 来作为 issues URL")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"repository"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"type"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token property"}},[t._v('"url"')]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://github.com/example"')]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("p",[t._v("如果 "),a("code",[t._v("repository.url")]),t._v(" 也没有，则会获取 git 中的"),a("strong",[t._v("远程仓库路径")]),t._v("来作为前缀，"),a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/blob/791e8d5b35d7df467cdf391992fe6b4e000a3f67/packages/conventional-changelog-core/lib/merge-config.js#L149-L154",target:"_blank",rel:"noopener noreferrer"}},[t._v("conventional-changelog-core 源码地址"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("img",{attrs:{src:"https://raw.githubusercontent.com/ITxiaohao/blog-img/master/img/vue-admin/20190711225233.png",alt:""}})]),t._v(" "),a("p",[t._v("如果你使用了第三方的协作系统（例如 "),a("strong",[t._v("bitbucket")]),t._v("）， 推荐你使用这个插件 "),a("a",{attrs:{href:"https://github.com/uglow/conventional-changelog-angular-bitbucket",target:"_blank",rel:"noopener noreferrer"}},[t._v("conventional-changelog-angular-bitbucket"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("emojis")])]),t._v(" "),a("p",[t._v("Type: "),a("code",[t._v("boolean")]),t._v(" Default: "),a("code",[t._v("false")]),t._v("，emojis types 参考 "),a("a",{attrs:{href:"https://gitmoji.carloscuesta.me/",target:"_blank",rel:"noopener noreferrer"}},[t._v("gitmoji"),a("OutboundLink")],1)]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("Commit Type")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Title")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Description")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("Emojis")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("feat")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Features")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("A new feature")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("✨")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("fix")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Bug Fixes")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("A bug Fix")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("🐛")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("docs")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Documentation")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Documentation only changes")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("📝")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("style")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Styles")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Changes that do not affect the meaning of the code (white-space, formatting, missing semi-colons, etc)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("💄")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("refactor")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Code Refactoring")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("A code change that neither fixes a bug nor adds a feature")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("♻️")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("perf")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Performance Improvements")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("A code change that improves performance")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("⚡️")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("test")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Tests")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Adding missing tests or correcting existing tests")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("✅")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("build")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Build")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Changes that affect the build system or external dependencies (example scopes: gulp, broccoli, npm)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("👷")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("ci")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Continuous Integrations")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Changes to our CI configuration files and scripts (example scopes: Travis, Circle, BrowserStack, SauceLabs)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("🔧")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("chore")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Chores")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Other changes that don't modify src or test files")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("🎫")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[a("code",[t._v("revert")])]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Reverts")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("Reverts a previous commit")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("⏪")])])])]),t._v(" "),a("p",[a("strong",[t._v("authorName")])]),t._v(" "),a("p",[t._v("Type: "),a("code",[t._v("boolean")]),t._v(" Default: "),a("code",[t._v("false")])]),t._v(" "),a("p",[t._v("在 CHANGELOG 中生成用户名")]),t._v(" "),a("p",[a("strong",[t._v("authorEmail")])]),t._v(" "),a("p",[t._v("Type: "),a("code",[t._v("boolean")]),t._v(" Default: "),a("code",[t._v("false")])]),t._v(" "),a("p",[t._v("在 CHANGELOG 中生成邮箱")]),t._v(" "),a("p",[t._v("更多细节可以看 "),a("a",{attrs:{href:"https://github.com/ITxiaohao/conventional-changelog-custom-config",target:"_blank",rel:"noopener noreferrer"}},[t._v("README"),a("OutboundLink")],1),t._v("，码字不易，开源不易，觉得不错给个 ⭐️ 吧~😝 感谢感谢~")]),t._v(" "),a("h2",{attrs:{id:"总结"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#总结","aria-hidden":"true"}},[t._v("#")]),t._v(" 总结")]),t._v(" "),a("p",[t._v("总结这一整套折腾过程，代码风格规范 ----\x3e commit 规范 ----\x3e version 规范 ----\x3e 生成 CHANGELOG ---\x3e 自定义 CHANGELOG ---\x3e NPM 发布预设")]),t._v(" "),a("p",[t._v("前四个步骤看看 README 就直接上手，没什么难点，自定义 CHANGELOG 稍微麻烦些，对外开放 "),a("code",[t._v("conventional-changelog-cli")]),t._v(" 收集用户配置，如 -p angular -s -r 0 -n config.js，如果有预设模版，比如 angular，就将 "),a("code",[t._v("conventional-changelog-angular")]),t._v(" 中的配置传入 "),a("code",[t._v("conventional-changelog-core")]),t._v(" 中 merge，之后通过 "),a("code",[t._v("git-raw-commits")]),t._v(" 从本地 git 中获取 log 数据，"),a("code",[t._v("conventional-changelog-parser")]),t._v(" 来解析用户提交的信息，将两种数据整合成一个对象，传入 "),a("code",[t._v("conventional-changelog-writer")]),t._v(" 生成 CHANGELOG.md 文件")]),t._v(" "),a("p",[t._v("刚开始安装插件比较多，一旦配完就是一两个命令的事，感兴趣的也参照我这篇文章，自己写一套模版用， npm 上也有很多预设模版可以用，axetroy 大佬写了个 "),a("a",{attrs:{href:"https://github.com/axetroy/vscode-changelog-generator",target:"_blank",rel:"noopener noreferrer"}},[t._v("VSCode 扩展"),a("OutboundLink")],1),t._v(" 列入了 conventional-changelog 官方推荐 ，"),a("a",{attrs:{href:"http://axetroy.xyz/#/post/186",target:"_blank",rel:"noopener noreferrer"}},[t._v("文章位置"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("strong",[t._v("本文篇幅较长，难免会有错误和不足的地方，希望大佬们留言指正，以免误人")])]),t._v(" "),a("h2",{attrs:{id:"参考文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#参考文档","aria-hidden":"true"}},[t._v("#")]),t._v(" 参考文档")]),t._v(" "),a("p",[a("a",{attrs:{href:"http://imziv.com/blog/article/read.htm?id=91",target:"_blank",rel:"noopener noreferrer"}},[t._v("git commit 、CHANGELOG 和版本发布的标准自动化"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://www.ruanyifeng.com/blog/2016/01/commit_message_change_log.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Commit message 和 Change log 编写指南"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://github.com/conventional-changelog/conventional-changelog/tree/master/packages/conventional-changelog-core",target:"_blank",rel:"noopener noreferrer"}},[t._v("conventional-changelog-core"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://git-scm.com/docs/git-log",target:"_blank",rel:"noopener noreferrer"}},[t._v("git-log"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://docs.npmjs.com/files/package.json",target:"_blank",rel:"noopener noreferrer"}},[t._v("package.json"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://panjiachen.gitee.io/vue-element-admin-site/zh/guide/advanced/git-hook.html#husky",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-element-admin"),a("OutboundLink")],1)]),t._v(" "),a("p",[a("a",{attrs:{href:"https://code.visualstudio.com/docs/editor/debugging#_platformspecific-properties",target:"_blank",rel:"noopener noreferrer"}},[t._v("VSCode Debugging"),a("OutboundLink")],1)])])},[],!1,null,null,null);s.default=e.exports}}]);